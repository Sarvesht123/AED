# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml
trigger:
 - stage
pr:
- '*'
schedules:
- cron: '0 1 * * *'
  displayName: Daily midnight build
  branches:
    include:
    - main
pool:
 vmImage: windows-latest
variables:
 - group: AED-VG
steps:
- checkout: none
#Script to clone and push to github
- script: |
 echo 'ADOGIT-URL = https://$(ADO-PAT)$(ADOGIT-URL)'
 echo 'GITHub URl = https://$(GITHUB-USER):$(GITHUB-PAT)$(GITHUB-URL)'
 echo "ADO-URL=$(ADO_URL)"
 git clone -b $(Build.SourceBranchName) https://$(ADO-PAT)$(ADOGIT-URL)$(ADO-REPONAME)
 cd $(ADO-REPONAME)
 ls -l
 pwd
 git remote -v
 git branch
 echo "before remote add"
 git remote add github https://$(GITHUB-USER):$(GITHUB-PAT)$(GITHUB-URL)$(GITHUB-REPONAME)
 git remote -v
 git push github $(Build.SourceBranchName)
 displayName: 'Git Clone and Push changes to GitHub '
